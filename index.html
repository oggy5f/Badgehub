<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Badgehub â€“ Daily Check-in</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    }

    body {
      background: #020617;
      color: #e5e7eb;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .app {
      width: 100%;
      max-width: 1000px;
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 24px;
      background: #020617;
      padding: 24px;
      border-radius: 20px;
      border: 1px solid #1f2937;
    }

    @media (max-width: 900px) {
      .app {
        grid-template-columns: 1fr;
      }
    }

    h1 {
      font-size: 22px;
      color: #38bdf8;
      margin-bottom: 4px;
    }

    .subtitle {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 20px;
    }

    .panel {
      border: 1px solid #1f2937;
      border-radius: 16px;
      padding: 16px;
    }

    label {
      font-size: 12px;
      color: #9ca3af;
      display: block;
      margin-bottom: 4px;
    }

    input, select {
      width: 100%;
      padding: 10px 14px;
      border-radius: 999px;
      background: #020617;
      border: 1px solid #374151;
      color: #e5e7eb;
      margin-bottom: 12px;
      font-size: 14px;
    }

    button {
      width: 100%;
      border-radius: 999px;
      padding: 11px;
      font-size: 14px;
      cursor: pointer;
      border: none;
      margin-bottom: 8px;
    }

    .btn-primary {
      background: linear-gradient(90deg, #22c55e, #a3e635);
      color: #022c22;
      font-weight: 600;
    }

    .btn-secondary {
      background: #020617;
      border: 1px solid #374151;
      color: #e5e7eb;
    }

    .status {
      font-size: 12px;
      min-height: 18px;
      margin-bottom: 10px;
      color: #9ca3af;
    }

    .status.success { color: #4ade80; }
    .status.error { color: #f87171; }

    .checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 12px;
    }

    .checkbox input { accent-color: #22c55e; }

    .caption-box {
      border: 1px dashed #374151;
      border-radius: 10px;
      padding: 10px;
      font-size: 13px;
      white-space: pre-wrap;
    }

    .right h2 {
      font-size: 14px;
      color: #9ca3af;
      margin-bottom: 10px;
    }

    .badge {
      width: 100%;
      aspect-ratio: 16 / 9;
      border-radius: 20px;
      background: linear-gradient(135deg, #22c55e, #16a34a);
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      color: #022c22;
    }

    .badge-circle {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      background: rgba(236,253,245,.95);
    }

    .badge-pill {
      position: absolute;
      width: 220px;
      height: 26px;
      border-radius: 999px;
      background: rgba(236,253,245,.95);
      top: 60%;
    }

    .badge-text {
      position: absolute;
      bottom: 12px;
      left: 16px;
      right: 16px;
      display: flex;
      justify-content: space-between;
      font-size: 13px;
    }

    .stats {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .chip {
      border: 1px solid #374151;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 11px;
      color: #9ca3af;
    }

  </style>
</head>
<body>

<div class="app">

  <!-- LEFT -->
  <div>
    <h1>BADGEHUB</h1>
    <div class="subtitle">Daily check-in mini app</div>

    <div class="panel">
      <label>Your name / FID</label>
      <input id="fidInput" type="text" placeholder="abcd123" />

      <label>Badge type</label>
      <input id="badgeTypeInput" type="text" value="Daily Check-in" />

      <label>Shape</label>
      <select id="shapeSelect">
        <option value="both">Circle + Pill</option>
        <option value="circle">Circle</option>
        <option value="pill">Pill</option>
      </select>

      <div class="checkbox">
        <input type="checkbox" id="autoCopyToggle" />
        <span>Auto copy caption after claim</span>
      </div>

      <button id="claimBtn" class="btn-primary">Claim today's badge</button>
      <button id="copyCaptionBtn" class="btn-secondary">Copy caption</button>

      <div id="status" class="status"></div>

      <div class="caption-box" id="captionText"></div>
    </div>
  </div>

  <!-- RIGHT -->
  <div class="right">
    <h2>Badge Preview</h2>

    <div class="badge" id="badgeMain">
      <div class="badge-circle" id="badgeCircle"></div>
      <div class="badge-pill" id="badgePill"></div>

      <div class="badge-text">
        <div>
          <div id="badgeFid">----</div>
          <div style="font-size:11px" id="badgeType">Daily Check-in</div>
        </div>
        <div id="badgeDate">--</div>
      </div>
    </div>

    <div class="stats">
      <div class="chip">Streak: <span id="streak">0</span></div>
      <div class="chip">Total: <span id="total">0</span></div>
      <div class="chip">Last: <span id="last">-</span></div>
    </div>
  </div>

</div>

<script>
(function () {

  var fid = document.getElementById("fidInput");
  var type = document.getElementById("badgeTypeInput");
  var shape = document.getElementById("shapeSelect");

  var claimBtn = document.getElementById("claimBtn");
  var copyBtn = document.getElementById("copyCaptionBtn");
  var autoCopy = document.getElementById("autoCopyToggle");
  var status = document.getElementById("status");

  var badgeFid = document.getElementById("badgeFid");
  var badgeType = document.getElementById("badgeType");
  var badgeDate = document.getElementById("badgeDate");
  var badgeCircle = document.getElementById("badgeCircle");
  var badgePill = document.getElementById("badgePill");

  var streakEl = document.getElementById("streak");
  var totalEl = document.getElementById("total");
  var lastEl = document.getElementById("last");
  var captionEl = document.getElementById("captionText");

  var KEY = "badgehub_state_v1";

  function today() {
    return new Date().toISOString().slice(0,10);
  }

  var state = JSON.parse(localStorage.getItem(KEY)) || {
    streak: 0,
    total: 0,
    lastDate: null,
    fid: "",
    type: "Daily Check-in"
  };

  function render() {
    badgeFid.textContent = fid.value || "----";
    badgeType.textContent = type.value;
    badgeDate.textContent = state.lastDate || "--";

    streakEl.textContent = state.streak;
    totalEl.textContent = state.total;
    lastEl.textContent = state.lastDate || "-";

    badgeCircle.style.display =
      shape.value === "circle" || shape.value === "both" ? "block" : "none";
    badgePill.style.display =
      shape.value === "pill" || shape.value === "both" ? "block" : "none";

    var caption =
      "#" + (fid.value || "----") + " " + type.value +
      " badge earned\n\nStreak: " + state.streak +
      " | Total: " + state.total +
      "\n#Badgehub #Base";

    captionEl.textContent = caption;
    return caption;
  }

  render();

  claimBtn.onclick = function () {
    if (state.lastDate === today()) {
      status.textContent = "Today's badge already claimed.";
      status.className = "status error";
      return;
    }

    state.streak =
      state.lastDate &&
      (new Date(today()) - new Date(state.lastDate)) / 86400000 === 1
        ? state.streak + 1
        : 1;

    state.total++;
    state.lastDate = today();
    state.fid = fid.value;
    state.type = type.value;

    localStorage.setItem(KEY, JSON.stringify(state));

    var caption = render();
    status.textContent = "Badge claimed. Streak updated.";
    status.className = "status success";

    if (autoCopy.checked && navigator.clipboard)
      navigator.clipboard.writeText(caption);
  };

  copyBtn.onclick = function () {
    if (navigator.clipboard) {
      navigator.clipboard.writeText(render());
      status.textContent = "Caption copied.";
      status.className = "status success";
    }
  };

  fid.oninput = render;
  type.oninput = render;
  shape.onchange = render;

})();
</script>

</body>
</html>
